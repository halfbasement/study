-------------------------------------------------------------------HTTP --------------------------------------------------------------------------------


리다이렉션 이해

1. 영구 리다이렉션 - 특정 리소스의 URI가 영구적으로 이동

-301 Moved Permanently
• 리다이렉트시 요청 메서드가 GET으로 변하고, 본문이 제거될 수 있음(MAY)
-308 Permanent Redirect
• 301과 기능은 같음
• 리다이렉트시 요청 메서드와 본문 유지(처음 POST를 보내면 리다이렉트도 POST 유지)

2. 일시 리다이렉션 - 일시적인 변경

리소스의 URI가 일시적으로 변경
• 따라서 검색 엔진 등에서 URL을 변경하면 안됨

302 Found
• 리다이렉트시 요청 메서드가 GET으로 변하고, 본문이 제거될 수 있음(MAY)


--PRG: Post/Redirect/Get

• POST로 주문후에 주문 결과 화면을 GET 메서드로 리다이렉트
• 새로고침해도 결과 화면을 GET으로 조회
• 중복 주문 대신에 결과 화면만 GET으로 다시 요청

• 현실
• 307, 303을 권장하지만 현실적으로 이미 많은 애플리케이션 라이브러리들이 302를 기본값으로 사용
• 자동 리다이렉션시에 GET으로 변해도 되면 그냥 302를 사용해도 큰 문제 없음

3. 특수 리다이렉션



------------HTTP 요청 

--헤더

• HTTP 전송에 필요한 모든 부가정보

• 헤더 분류
• General 헤더: 메시지 전체에 적용되는 정보, 예) Connection: close
• Request 헤더: 요청 정보, 예) User-Agent: Mozilla/5.0 (Macintosh; ..)
• Response 헤더: 응답 정보, 예) Server: Apache
• 표현 헤더 : 표현 바디 정보, 예) Content-Type: text/html, Content-Length: 3423

-바디

• 표현 본문은 요청이나 응답에서 전달할 실제 데이터
• 표현 헤더는 엔티티 본문의 데이터를 해석할 수 있는 정보 제공


- 협상(콘텐츠 네고시에이션)
클라이언트가 선호하는 표현 요청
• Accept: 클라이언트가 선호하는 미디어 타입 전달
• Accept-Charset: 클라이언트가 선호하는 문자 인코딩
• Accept-Encoding: 클라이언트가 선호하는 압축 인코딩
• Accept-Language: 클라이언트가 선호하는 자연 언어
• 협상 헤더는 요청시에만 사용


---------쿠키

• 쿠키 정보는 항상 서버에 전송됨
• 네트워크 트래픽 추가 유발
• 최소한의 정보만 사용(세션 id, 인증 토큰)
• 서버에 전송하지 않고, 웹 브라우저 내부에 데이터를 저장하고 싶으면 웹 스토리지 (localStorage, sessionStorage) 참고
• 주의!
• 보안에 민감한 데이터는 저장하면 안됨(주민번호, 신용카드 번호 등등)

---------캐시

클라이언트가 요청을 보내고 응답을 받으면 그 캐시를 브라우저 캐시에 저장해놨다가 응답받는 과정을 생략하고 브라우저캐시에있는걸 사용한다

---캐시가 없을 때
• 데이터가 변경되지 않아도 계속 네트워크를 통해서 데이터를 다운로드 받아야 한다.
• 인터넷 네트워크는 매우 느리고 비싸다.
• 브라우저 로딩 속도가 느리다.
• 느린 사용자 경험


---캐시 적용
• 캐시 덕분에 캐시 가능 시간동안 네트워크를 사용하지 않아도 된다.
• 비싼 네트워크 사용량을 줄일 수 있다.
• 브라우저 로딩 속도가 매우 빠르다.
• 빠른 사용자 경험




-----캐시 시간 초과
• 캐시 유효 시간이 초과해서 서버에 다시 요청하면 다음 두 가지 상황이 나타난다. -> 데이터 최종수정일을 클라와 서버를 서로 비교함

1. 서버에서 기존 데이터를 변경함 

• 캐시 유효 시간이 초과해도, 서버의 데이터가 갱신되지 않으면
• 304 Not Modified + 헤더 메타 정보만 응답(바디X)
• 클라이언트는 캐시에 저장되어 있는 데이터 재활용
• 결과적으로 네트워크 다운로드가 발생하지만 용량이 적은 헤더 정보만 다운로드
• 매우 실용적인 해결책


  2. 서버에서 기존 데이터를 변경하지 않음 ->


















