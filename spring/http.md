# http

## 1. 인터넷 네트워크

- 표준은 거의 TCP ( 가끔 UDP도 사용 )
- PORT - 같은 IP내에서 프로세스 구분
- DNS - 도메인 이름으로 IP를 반환 ex: google.com ( IP는 가변적이고 외우기 힘들기 떄문)

### URI

- URI = URL + URN  ( 보통 URI = URL)
- https(스키마)://www.google.com(도메인):443(포트)/search?q=hello&hf=ko(쿼리) <br>

## http 기본

- 보통 http 1.1 사용 ( http2 , http3 도 사용)

### 무상태 프로토콜
- 서버가 클라이언트 상태를 모름
- 실무에선 최대한 무상태로 설계 ( 서버 확장이 용이함 )
- 비연결성의 한계 : 3 way handshake등 시간이 늘어남

## HTTP 메시지
```java
스타트 // 응답( HTTP/1.1 200 OK / 버젼 상태코드 문구)
--------
헤더  //응답 ( contentType:appplication/json , length.. 등등 바디를 제외한 메타 데이터)
---------
공백
---------
바디 // 넘어갈 데이터들 
```

## HTTP 메서드
- URI 설계에서 가장 중요한건 ***리소스 식별***
### GET
- 조회는 최대한 GET으로
- 데이터를 보낼 땐 바디에 안담고 쿼리로 보냄 ( 지원 문제 )
### POST
- 생성 요청,데이터 처리
- 리소스도 생성 됨
- 애매하면 POST
### PUT
- 리소스가 없으면 생성
- 수정과 다르게 **기존의 데이터를 완전 없애고 씌움**
### PATCH
- 수정

## HTTP 메서드 특징

- 안전 : 호출해도 리소스 변경 X
- 멱등 : 호출마다 결과가 같음 ( 다른 요청으로 인한 데이터 변환은 고려 X)
1. GET , PUT, DELET -> 멱등 / POST -> 멱등 X
- 캐시가능 

## 클라이언트에서 서버로 데이터 전송

- 쿼리 파라미터
1. GET
2. 정렬필터 (동적 데이터)

- 메세지 바디를 통해 전송
1. POST , PUT , PATCH ...
2. 회원가입 , 상품주문 ...

- 4가지 상황
1. 정적 데이터 조회 
2. 동적 데이터 조회
3. HTML Form데이터 전송(GET,POST) // 헤더 + GET -> 쿼리 데이터 전송 , POST-> name=value 바디 데이터 전송
4. HTTP API 데이터 전송 (AJAX)

## HTTP API 설계 예시

1. 리소스만 식별 해야함
2. 수정은 PATCH 지향

- URL 설계 개념
1. 문서 
- 단일개념 (파일 하나 , 객체 인스턴스, 데이터베이스 로우 등)
2. 컬렉션
- 서버가 관리하는 리소스 디렉터리
- 서버가 리소스의 URI를 생성하고 관리
3. 스토어 
- 클라이언트가 관리하는 자원 저장소
- 클라이언트가 리소스의 URI를 알고 관리
4. 컨트롤러 (컨트롤 URI)
- 위의 방법으로 해결 못하는 추가 프로세스 실행
- 동사 직접 사용 ( /member/{id}/delete) ex: Form

## HTTP 상태코드
1. 200 
- OK 

2. 300 (리다이렉션)
- 영구 리다이렉션 - 특정 리소스의 URI가 영구적으로 이동
- 일시 리다이렉션 - RPG(POST/Redirect/get) <br>
 ( ex: 주문에 성공하고 반환값으로 302found와 URI정보를 줘서 GET으로 바꾸고 상세페이지로 보냄)
